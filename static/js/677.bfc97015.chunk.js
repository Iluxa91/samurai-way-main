"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[677],{8677:function(t,s,e){e.r(s),e.d(s,{default:function(){return B}});var o=e(5671),i=e(3144),r=e(136),n=e(8557),a=e(2791),l=e(9439),u="ProfileInfo_descriptionBlock__lbg-l",c="ProfileInfo_profile__Kgr3R",d="ProfileInfo_mainPhoto__ZTHyP",h="ProfileInfo_contacts__GAXhA",p="ProfileInfo_error__OPhGo",f="ProfileInfo_profileInfo__JJjC+",g=e(5785),x=e(184),v=function(t){(0,r.Z)(e,t);var s=(0,n.Z)(e);function e(){var t;(0,o.Z)(this,e);for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return(t=s.call.apply(s,[this].concat(r))).state={editMode:!1,status:t.props.status},t.activateEditMode=function(){t.setState({editMode:!0})},t.deactivateEditMode=function(){t.setState({editMode:!1}),t.props.updateStatus(t.state.status)},t.onStatusChange=function(s){t.setState({status:s.currentTarget.value})},t}return(0,i.Z)(e,[{key:"componentDidUpdate",value:function(t,s,e){t.status!==this.props.status&&this.setState({status:this.props.status})}},{key:"render",value:function(){return(0,x.jsxs)("div",{children:[!this.state.editMode&&(0,x.jsxs)("div",{children:[(0,x.jsx)("b",{children:"Status"}),": ",(0,x.jsx)("span",{onDoubleClick:this.activateEditMode,children:this.props.status||"No Status"})]}),this.state.editMode&&(0,x.jsx)("div",{children:(0,x.jsx)("input",{onChange:this.onStatusChange,autoFocus:!0,onBlur:this.deactivateEditMode,value:this.state.status})})]})}}]),e}(a.Component),j=e(9850),A=e(1413),m=e(5705),b=function(t){var s=t.profile,e=t.onSubmit,o=(0,m.TA)({initialValues:{fullName:s.fullName,lookingForAJob:!0,lookingForAJobDescription:s.lookingForAJobDescription,aboutMe:s.aboutMe,contacts:(0,A.Z)({},s.contacts)},onSubmit:function(t){e({fullName:t.fullName,lookingForAJob:t.lookingForAJob,lookingForAJobDescription:t.lookingForAJobDescription,aboutMe:t.aboutMe,contacts:{facebook:t.contacts.facebook,github:t.contacts.github,instagram:t.contacts.instagram,vk:t.contacts.vk,mainLink:t.contacts.mainLink,twitter:t.contacts.twitter,website:t.contacts.website,youtube:t.contacts.youtube}})}});return(0,x.jsxs)("form",{onSubmit:o.handleSubmit,children:[(0,x.jsx)("button",{type:"submit",children:"save"}),(0,x.jsxs)("div",{children:[(0,x.jsx)("b",{children:"Full name"}),":",(0,x.jsx)("input",(0,A.Z)({},o.getFieldProps("fullName")))]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("b",{children:"Looking for a job"}),":",(0,x.jsx)("input",(0,A.Z)({type:"checkbox"},o.getFieldProps("lookingForAJob")))]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("b",{children:"My professional skills"}),":",(0,x.jsx)("input",(0,A.Z)({},o.getFieldProps("lookingForAJobDescription")))]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("b",{children:"About me"}),":",(0,x.jsx)("input",(0,A.Z)({},o.getFieldProps("aboutMe")))]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("b",{children:"Contacts"}),": ",s.contacts&&Object.keys(s.contacts).map((function(t){return(0,x.jsx)("div",{className:h,children:(0,x.jsxs)("b",{children:[t,":",(0,x.jsx)("input",(0,A.Z)({placeholder:t},o.getFieldProps("contacts."+t)))]})},t)}))]})]})},P=function(t){var s,e=(0,a.useRef)(null),o=(0,a.useState)(!1),i=(0,l.Z)(o,2),r=i[0],n=i[1];if(!t.profile)return(0,x.jsx)(g.p,{});return(0,x.jsxs)("div",{className:u,children:[(0,x.jsxs)("div",{className:c,children:[(0,x.jsx)("img",{src:(null===(s=t.profile.photos)||void 0===s?void 0:s.large)||j,className:d,alt:"avatar"}),t.isOwner&&(0,x.jsxs)("div",{children:[(0,x.jsx)("button",{onClick:function(){var t;e&&(null===(t=e.current)||void 0===t||t.click())},children:"upload file"}),(0,x.jsx)("input",{style:{display:"none"},ref:e,type:"file",onChange:function(s){s.target.files&&s.target.files.length&&t.savePhoto(s.target.files[0])}})]}),(0,x.jsx)(v,{status:t.status,updateStatus:t.updateStatus})]}),(0,x.jsx)("div",{className:f,children:r?(0,x.jsx)(b,{profile:t.profile,onSubmit:function(s){t.saveProfile(s),n(!1)}}):(0,x.jsx)(D,{isOwner:t.isOwner,profile:t.profile,goToEditMode:function(){n(!0)},errorMessage:t.errorMessage})})]})},k=function(t){var s=t.contactTitle,e=t.contactValue;return(0,x.jsx)("div",{className:h,children:(0,x.jsxs)("li",{children:[(0,x.jsx)("b",{children:s}),": ",e]})})},D=function(t){var s=t.profile,e=t.isOwner,o=t.goToEditMode,i=t.errorMessage;return(0,x.jsxs)("div",{children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("b",{children:"Full name"}),": ",s.fullName]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("b",{children:"Looking for a job"}),": ",s.lookingForAJob?"yes":"no"]}),s.lookingForAJob&&(0,x.jsxs)("div",{children:[(0,x.jsx)("b",{children:"My professional skills"}),": ",s.lookingForAJobDescription]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("b",{children:"About me"}),": ",s.aboutMe]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("b",{children:"Contacts"}),": ",s.contacts&&Object.keys(s.contacts).map((function(t){return(0,x.jsx)(k,{contactTitle:t,contactValue:s.contacts&&s.contacts[t]},t)}))]}),e&&(0,x.jsxs)("div",{children:[(0,x.jsx)("button",{onClick:o,children:"edit"}),i&&(0,x.jsx)("div",{className:p,children:i})]})]})},F=e(4136),C="MyPosts_postsBlock__FLQlx",S="MyPosts_posts__KksIg",L="MyPosts_error__mbT40",K="Post_item__3Ko6E",E=function(t){return(0,x.jsxs)("div",{className:K,children:[(0,x.jsx)("img",{src:"data:image/png;base64,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"}),t.message,(0,x.jsxs)("div",{children:[t.likesCount,(0,x.jsx)("span",{children:"likes"})]})]})},Q=a.memo((function(t){var s=t.posts.map((function(t){return(0,x.jsx)(E,{likesCount:t.likesCount,message:t.message},t.id)}));return(0,x.jsxs)("div",{className:C,children:[(0,x.jsx)("hr",{}),(0,x.jsx)("h3",{children:"My Posts"}),(0,x.jsx)("hr",{}),(0,x.jsx)(M,{addPost:t.addPost}),(0,x.jsx)("div",{className:S,children:"New posts"}),s]})})),M=function(t){var s=(0,m.TA)({initialValues:{newPostText:""},validate:function(t){var s={};return t.newPostText?t.newPostText.length>10&&(s.newPostText="Max length is 10 symbols"):s.newPostText="Required",s},onSubmit:function(s){t.addPost(s.newPostText)}});return(0,x.jsxs)("form",{onSubmit:s.handleSubmit,children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("textarea",(0,A.Z)({className:s.errors.newPostText?L:"",placeholder:"Post message"},s.getFieldProps("newPostText"))),s.touched.newPostText&&s.errors.newPostText&&(0,x.jsx)("div",{style:{color:"red"},children:s.errors.newPostText})]}),(0,x.jsx)("div",{children:(0,x.jsx)("button",{type:"submit",children:"Add post"})})]})},y=e(8687),z=(0,y.$j)((function(t){return{posts:t.profilePage.posts}}),(function(t){return{addPost:function(s){t((0,F.Wl)(s))}}}))(Q),w="Profile_content__Lkpk8",N=function(t){return(0,x.jsxs)("div",{className:w,children:[(0,x.jsx)(P,{profile:t.profile,status:t.status,updateStatus:t.updateStatus,isOwner:t.isOwner,savePhoto:t.savePhoto,saveProfile:t.saveProfile,errorMessage:t.errorMessage}),(0,x.jsx)(z,{})]})},T=e(9271),J=e(2163),Z=e(7781),U=function(t){(0,r.Z)(e,t);var s=(0,n.Z)(e);function e(){return(0,o.Z)(this,e),s.apply(this,arguments)}return(0,i.Z)(e,[{key:"refreshProfile",value:function(){var t=Number(this.props.match.params.userId);t||(t=this.props.authorizedUserId)||this.props.history.push("/login"),this.props.getUserProfile(t),this.props.getStatus(t)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(t,s,e){this.props.match.params.userId!=t.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,x.jsx)(N,{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,isOwner:!this.props.match.params.userId,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile,errorMessage:this.props.errorMessage})}}]),e}(a.Component),B=(0,Z.qC)((0,y.$j)((function(t){return{profile:t.profilePage.profile,status:t.profilePage.status,authorizedUserId:t.auth.userId,isAuth:t.auth.isAuth,errorMessage:t.profilePage.profileErrorMessage}}),{getUserProfile:F.et,getStatus:F.lR,updateStatus:F.yR,savePhoto:F.Ju,saveProfile:F.Ii}),T.EN,J.D)(U)},2163:function(t,s,e){e.d(s,{D:function(){return c}});var o=e(1413),i=e(5987),r=(e(2791),e(9271)),n=e(8687),a=e(184),l=["isAuth"],u=function(t){return{isAuth:t.auth.isAuth}};function c(t){return(0,n.$j)(u)((function(s){var e=s.isAuth,n=(0,i.Z)(s,l);return e?(0,a.jsx)(t,(0,o.Z)({},n)):(0,a.jsx)(r.l_,{to:"/login"})}))}}}]);
//# sourceMappingURL=677.bfc97015.chunk.js.map